---
---

<html lang="pt">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Simulador Comprar vs Arrendar</title>

  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap" rel="stylesheet">

  <style>
    body{font-family:Inter;margin:0;background:#f3f4f6;}
    .container{display:flex;gap:40px;padding:40px;}
    .left{flex:1;}
    .right{flex:1;background:#065f46;color:#fff;padding:30px;border-radius:16px;}
    .card{background:#fff;padding:20px;border-radius:12px;margin-bottom:20px;}
    label{font-weight:600;display:block;margin-top:14px;}
    .value{float:right;font-weight:600;color:#065f46;}
    input[type=range]{width:100%;margin-top:10px;}
    button{width:100%;padding:14px;background:#065f46;color:#fff;border:none;border-radius:8px;font-size:16px;cursor:pointer;margin-top:18px;}
    .big{font-size:40px;font-weight:600;margin:8px 0 18px 0;}
    .bar{height:10px;background:#fbbf24;border-radius:999px;margin:10px 0;}
    .bar2{height:10px;background:#34d399;border-radius:999px;margin:10px 0;}
    .resultBox{background:#166534;padding:20px;border-radius:14px;margin-top:20px;}
    @media (max-width: 980px){ .container{flex-direction:column;} }
  </style>
</head>

<body>
  <div class="container">
    <div class="left">
      <h1>Simulador Comprar vs Arrendar</h1>

      <div class="card">
        <h3>üè† Comprar</h3>

        <label>Pre√ßo do Im√≥vel <span id="vpreco" class="value">250000‚Ç¨</span></label>
        <input id="preco" type="range" min="50000" max="1000000" step="5000" value="250000" />

        <label>Entrada <span id="ventrada" class="value">50000‚Ç¨</span></label>
        <input id="entrada" type="range" min="0" max="300000" step="5000" value="50000" />

        <label>Juro (%) <span id="vjuros" class="value">3.5%</span></label>
        <input id="juros" type="range" min="0" max="8" step="0.1" value="3.5" />

        <label>Prazo (anos) <span id="vanos" class="value">30</span></label>
        <input id="anos" type="range" min="5" max="40" step="1" value="30" />

        <label>IMI anual <span id="vimi" class="value">400‚Ç¨</span></label>
        <input id="imi" type="range" min="0" max="3000" step="50" value="400" />

        <label>Condom√≠nio mensal <span id="vcond" class="value">50‚Ç¨</span></label>
        <input id="cond" type="range" min="0" max="400" step="10" value="50" />

        <label>Manuten√ß√£o anual <span id="vmanut" class="value">1000‚Ç¨</span></label>
        <input id="manut" type="range" min="0" max="8000" step="100" value="1000" />
      </div>

      <div class="card">
        <h3>üè° Arrendar</h3>

        <label>Renda mensal <span id="vrenda" class="value">800‚Ç¨</span></label>
        <input id="renda" type="range" min="300" max="4000" step="50" value="800" />

        <label>Seguro anual <span id="vseguro" class="value">150‚Ç¨</span></label>
        <input id="seguro" type="range" min="0" max="800" step="10" value="150" />

        <label>Extras mensais <span id="vextra" class="value">0‚Ç¨</span></label>
        <input id="extra" type="range" min="0" max="800" step="10" value="0" />

        <button id="btnCalc">Calcular</button>
      </div>
    </div>

    <div class="right">
      <h2>Resultados</h2>

      <div>Presta√ß√£o Mensal</div>
      <div class="big" id="prest">‚Äî</div>

      <div>Custo Anual (Comprar)</div>
      <div id="cComprar">‚Äî</div>
      <div class="bar"></div>

      <div>Custo Anual (Arrendar)</div>
      <div id="cArrendar">‚Äî</div>
      <div class="bar2"></div>

      <div class="resultBox" id="final">‚Äî</div>
    </div>
  </div>

  <script>
    // Helper
    const el = (id) => document.getElementById(id);
    const money = (n) => new Intl.NumberFormat('pt-PT', { style:'currency', currency:'EUR' }).format(n);

    const inputs = {
      preco: el("preco"),
      entrada: el("entrada"),
      juros: el("juros"),
      anos: el("anos"),
      imi: el("imi"),
      cond: el("cond"),
      manut: el("manut"),
      renda: el("renda"),
      seguro: el("seguro"),
      extra: el("extra"),
    };

    const labels = {
      vpreco: el("vpreco"),
      ventrada: el("ventrada"),
      vjuros: el("vjuros"),
      vanos: el("vanos"),
      vimi: el("vimi"),
      vcond: el("vcond"),
      vmanut: el("vmanut"),
      vrenda: el("vrenda"),
      vseguro: el("vseguro"),
      vextra: el("vextra"),
    };

    const out = {
      prest: el("prest"),
      cComprar: el("cComprar"),
      cArrendar: el("cArrendar"),
      final: el("final"),
    };

    function updateLabels(){
      labels.vpreco.textContent   = `${inputs.preco.value}‚Ç¨`;
      labels.ventrada.textContent = `${inputs.entrada.value}‚Ç¨`;
      labels.vjuros.textContent   = `${inputs.juros.value}%`;
      labels.vanos.textContent    = `${inputs.anos.value}`;
      labels.vimi.textContent     = `${inputs.imi.value}‚Ç¨`;
      labels.vcond.textContent    = `${inputs.cond.value}‚Ç¨`;
      labels.vmanut.textContent   = `${inputs.manut.value}‚Ç¨`;

      labels.vrenda.textContent   = `${inputs.renda.value}‚Ç¨`;
      labels.vseguro.textContent  = `${inputs.seguro.value}‚Ç¨`;
      labels.vextra.textContent   = `${inputs.extra.value}‚Ç¨`;
    }

    function monthlyPayment(principal, annualRatePct, years){
      const n = years * 12;
      const r = (annualRatePct / 100) / 12;

      if (principal <= 0) return 0;
      if (r === 0) return principal / n;

      return principal * (r * Math.pow(1 + r, n)) / (Math.pow(1 + r, n) - 1);
    }

    function calculate(){
      const preco   = Number(inputs.preco.value);
      const entrada = Number(inputs.entrada.value);
      const juros   = Number(inputs.juros.value);
      const anos    = Number(inputs.anos.value);

      const imi     = Number(inputs.imi.value);
      const cond    = Number(inputs.cond.value);
      const manut   = Number(inputs.manut.value);

      const renda   = Number(inputs.renda.value);
      const seguro  = Number(inputs.seguro.value);
      const extra   = Number(inputs.extra.value);

      const emprestimo = Math.max(0, preco - entrada);
      const prestacaoMensal = monthlyPayment(emprestimo, juros, anos);

      const anualComprar  = (prestacaoMensal * 12) + imi + (cond * 12) + manut;
      const anualArrendar = (renda * 12) + seguro + (extra * 12);

      out.prest.textContent    = money(prestacaoMensal);
      out.cComprar.textContent = money(anualComprar);
      out.cArrendar.textContent= money(anualArrendar);

      const diff = Math.abs(anualComprar - anualArrendar);

      if (anualComprar < anualArrendar){
        out.final.innerHTML = `<b>Comprar compensa</b><br>Poupan√ßa anual de ${money(diff)}`;
      } else if (anualArrendar < anualComprar){
        out.final.innerHTML = `<b>Arrendar compensa</b><br>Poupan√ßa anual de ${money(diff)}`;
      } else {
        out.final.innerHTML = `<b>Empate</b><br>Os custos anuais s√£o iguais.`;
      }
    }

    // Wire events (auto-calc on slider move)
    Object.values(inputs).forEach((input) => {
      input.addEventListener("input", () => { updateLabels(); calculate(); });
    });

    el("btnCalc").addEventListener("click", () => { updateLabels(); calculate(); });

    // Init
    updateLabels();
    calculate();
  </script>
</body>
</html>
